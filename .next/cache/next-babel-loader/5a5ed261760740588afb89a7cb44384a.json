{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { gql, useMutation } from '@apollo/client';\nimport FormStyles from './styles/Form';\nimport useForm from '../lib/useForm';\nimport { CURRENT_USER_QUERY } from './User';\nimport DisplayError from './ErrorMessage';\nconst RESET_MUTATION = gql`\n  mutation RESET_MUTATION(\n    $email: String!\n    $password: String!\n    $token: String!\n  ) {\n    redeemUserPasswordResetToken(\n      email: $email\n      password: $password\n      token: $token\n    ) {\n      code\n      message\n    }\n  }\n`;\nexport default function Reset({\n  token\n}) {\n  var _data$redeemUserPassw;\n\n  const {\n    inputs,\n    handleChange,\n    resetForm\n  } = useForm({\n    email: '',\n    password: '',\n    token\n  });\n  const [resetPassword, {\n    data,\n    loading,\n    error\n  }] = useMutation(RESET_MUTATION, {\n    variables: inputs\n  });\n\n  async function handleSubmit(e) {\n    e.preventDefault();\n    const res = await resetPassword().catch(console.error);\n  }\n\n  const successfulError = (data === null || data === void 0 ? void 0 : (_data$redeemUserPassw = data.redeemUserPasswordResetToken) === null || _data$redeemUserPassw === void 0 ? void 0 : _data$redeemUserPassw.code) ? data === null || data === void 0 ? void 0 : data.redeemUserPasswordResetToken : null;\n  if (loading) return /*#__PURE__*/_jsx(\"p\", {\n    children: \"Loading...\"\n  });\n\n  if ((data === null || data === void 0 ? void 0 : data.redeemUserPasswordResetToken) === null) {\n    return /*#__PURE__*/_jsx(\"p\", {\n      children: \"Success! You can now sign in with your new password.\"\n    });\n  }\n\n  return /*#__PURE__*/_jsxs(FormStyles, {\n    method: \"POST\",\n    onSubmit: handleSubmit,\n    children: [/*#__PURE__*/_jsx(\"h2\", {\n      children: \"Reset Password\"\n    }), /*#__PURE__*/_jsx(DisplayError, {\n      error: error || successfulError\n    }), /*#__PURE__*/_jsxs(\"fieldset\", {\n      children: [/*#__PURE__*/_jsxs(\"label\", {\n        htmlFor: \"email\",\n        children: [\"Email\", /*#__PURE__*/_jsx(\"input\", {\n          type: \"email\",\n          name: \"email\",\n          placeholder: \"email\",\n          autoComplete: \"email\",\n          value: inputs.email,\n          onChange: handleChange\n        })]\n      }), /*#__PURE__*/_jsxs(\"label\", {\n        htmlFor: \"password\",\n        children: [\"Password\", /*#__PURE__*/_jsx(\"input\", {\n          type: \"password\",\n          name: \"password\",\n          placeholder: \"password\",\n          autoComplete: \"password\",\n          value: inputs.password,\n          onChange: handleChange\n        })]\n      }), /*#__PURE__*/_jsx(\"button\", {\n        type: \"submit\",\n        children: \"Reset Password\"\n      })]\n    })]\n  });\n}","map":null,"metadata":{},"sourceType":"module"}